@model VocabInstaller.ViewModels.ReviewViewModel

@{
    ViewBag.Title = "Review";
    var questionedAt = DateTime.Now;
}

@section navigations {
    <ul class="nav navbar-nav">
        <li><a href="@Url.Action("Index", "Home")">Home</a></li>
        <li class="divider_vertical"></li>
        <li><a href="@Url.Action("Index", "Review")">Review</a></li>
        <li class="divider_vertical"></li>
        <li><a href="@Url.Action("Status", "Review")">Status</a></li>
    </ul>
}

<h2>Review</h2>

<!-- Pagination -->
<div class="row">
    <div class="page_position">
        <span class="badge">[ @(Model.Page + 1) / @(Model.LastPage + 1) ]</span>
    </div>
    <div class="page_controller">
        @Html.Partial("_PagingPartial")
    </div>
</div>

<!-- Card -->
<div id="review" class="row">
    @if (Model.ViewCards != null) {
        var c = Model.ViewCards.ToArray()[0];
        <section class="card">
            @using (Html.BeginForm("Answer", "Review",
            routeValues: new { id = c.Id }, method: FormMethod.Get,
            htmlAttributes: new { @class = "form-horizontal" })) {

                @Html.Hidden("page", Model.Page)
                @Html.Hidden("questionedAt", questionedAt)

                <div class="card_left">
                    <div class="question">
                        <div class="display_label">Question</div>
                        <div class="display_field">@c.Question</div>
                    </div>
                    
                    <div class="answer">
                        <div class="display_label">Answer</div>
                        <div class="display_field"><span>?</span></div>
                    </div>
                </div>

                <div class="card_right">
                    <div class="form-group submit_button">
                        <button type="submit" id="sbmAnswer" class="btn btn-primary">
                            Answer
                        </button>
                    </div>
                </div>
            }
                <div class="card_left clear-both">
                </div>

                <div class="card_right">
                    <div class="created_at">
                        <div class="display_label">Created at</div>
                        <div class="display_field">
                            @c.CreatedAt.ToString("yyyy/MM/dd HH:mm")
                        </div>
                    </div>

                    <div class="reviewed_at">
                        <div class="display_label">Reviewed at</div>
                        <div class="display_field">
                            @c.ReviewedAt.ToString("yyyy/MM/dd HH:mm")
                        </div>
                    </div>

                    <div class="review_level">
                        <div class="display_label">Review Level</div>
                        <div class="display_field">
                            <img src="~/Images/rev@(c.ReviewLevel).png" alt="review icon" class="review_icon" />
                            <span class="badge">@(c.ReviewLevel + 1)</span>
                        </div>
                    </div>

                    <div>
                        @Html.ActionLink("Edit", "Edit", "Home", new { id = c.Id, page = Model.Page, from = "Review" },
                            new { @id = "btnEdit", @class = "btn btn-primary" })
                    </div>

            </div> <!-- div class="card_right" -->
        </section>
    } else {
        <p>No item was found.</p>
    }
</div> <!-- div class="row" -->

<div class="back_to">
    &nbsp;
</div>

@section scripts {
<script type="text/javascript">
    $(function () {
        $("#sbmAnswer").focus();
    });
</script>
}
